<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/public/stylesheets/index.css">
    <link rel="stylesheet" href="/public/stylesheets/landingPage.css" />
    <link rel="stylesheet" href="/public/stylesheets/userStyle.css" />
    <link rel="preconnect" href="https://rsms.me/" />
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.0.7/css/all.css"
    />
    <!-- Include sweet alert -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.4/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.4/dist/sweetalert2.all.min.js"></script>
    
    <link rel="shortcut icon" type="image/jpg" href="/public/img/lap4you-favicon.png" />
    <title><%=locals.documentTitle%> | LAP4YOU</title>
    
    <style>
      .product-details {
        background-image: url(/public/img/design/productPage/heroBG/Black.jpg);
        min-height: 100px;
        }
        .custom-select {
            appearance: none;
            background-color: #f8f9fa;
            border: none;
            border-radius: 0;
            padding: 0.375rem 0.75rem;
            font-size: 0.875rem;
            color: #212529;
            cursor: pointer;
          }

          .custom-select:hover {
            background-color: #e9ecef;
          }

          .custom-select:focus {
            outline: none;
            box-shadow: none;
          }

          .custom-select option {
            font-size: 0.875rem;
            color: #212529;
          }

    </style>
  </head>
  <body>
    <header>
      <div class="container-fluid header-top" style="background: #f3f2f2;">
        <div class="container d-flex header-top-links justify-content-end">
          <a class="px-2 d-none d-lg-block" href="">Contact Us</a>
          <a class="px-2 d-none d-lg-block" href="">About Us</a>
        </div>
      </div>
      <nav
        class="container navbar navbar-expand-lg bg-white py-3 px-2 line-break"
      >
        <div class="container-fluid justify-content-around">
          <a class="navbar-brand d-flex align-items-center" href="/">
            <img
              src="/public/img/lap4you-logo.png"
              alt="Logo"
              width="40"
              height="40"
              class="d-inline-block align-text-top"
            />
            <div class="brand-name ms-3">
              <span>LAP<span style="color: red;">4</span>YOU</span>
            </div>
          </a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarText"
            aria-controls="navbarText"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarText">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0 align-items-center">
              <li class="nav-item mx-3 ms-lg-5 ">
                <a class="nav-link text-dark" href="/categories/64888a004cb3b3a4b1bb8be3">Gaming</a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark" href="/categories/648d930bca2707bb62f29e01">Student</a>
              </li>
              <li class="nav-item ">
                <a class="nav-link text-dark" href="/categories/648d9311ca2707bb62f29e06">Business</a>
              </li>
            </ul>
            <span class="nav-item nav-link text-center mb-2 mb-lg-0 mx-2">
              <a class="nav-link" href="/products">Collection</a>
            </span>
            <div id="wish-count">
              <span class="nav-item nav-link text-center mb-2 mb-lg-0 mx-2">
                <a class="nav-link" href="/users/wishlist">Wishlist <%if(locals.wishlistCount){%><span class="count-icon" ><%=wishlistCount%></span><%}%></a>
            </span>
            </div>
          <div id="cart-count">
            <span class="nav-item nav-link text-center mb-2 mb-lg-0 mx-2" >
              <a  class="nav-link" href="/users/cart">Cart <%if(locals.cartCount){%><span class="count-icon" "><%=cartCount%></span><%}%></a>
            </span>
          </div>

            <span class="nav-item nav-link text-center mb-2 mb-lg-0 ms-lg-3">
              <% if(session){%>
              <div class="d-block d-lg-none">
                <hr />
                <span class="nav-item nav-link text-center mb-2 mb-lg-0 mx-2">
                  <a class="nav-link fw-bold" href="/users/profile"
                    ><img
                      src="/Public/img/users/<%=locals.currentUser.photo%>"
                      height="25px"
                      alt=""
                      class="mx-2"
                    /><%=locals.currentUser.name%></a
                  >
                </span>
                <span class="nav-item nav-link text-center mb-2 mb-lg-0 mx-2">
                  <a
                    class="nav-link"
                    style="font-size: 0.85rem"
                    href="/users/signOut"
                    >Sign out</a
                  >
                </span>
              </div>
              <div class="btn-group dropstart d-none d-lg-block">
                <button
                  type="button"
                  class="btn dropdown-toggle button-div"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                  style="
                    text-transform: uppercase;
                    letter-spacing: 2px;
                    color: grey;
                    font-weight: 600;
                  "
                >
                  <img
                    src="/Public/img/users/<%=locals.currentUser.photo%>"
                    height="25px"
                    alt=""
                  />
                </button>
                <ul class="dropdown-menu" style="font-size: 0.75rem">
                  <li
                    class="dropdown-item border-bottom"
                    style="pointer-events: none"
                  >
                    <%=locals.currentUser.name%>
                  </li>
                  <li>
                    <a class="dropdown-item" href="/users/profile">Profile</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="/users/orders">Orders</a>
                  </li>
                  <li class="border-bottom">
                    <a class="dropdown-item" href="/users/addresses">Address</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="/users/signOut">Sign Out</a>
                  </li>
                </ul>
              </div>

              <% }else{%>
              <a class="nav-link" href="/users/signIn">Sign In</a>
              <%}%>
            </span>
          </div>
        </div>
      </nav>
    </header>
    <% if (productDetails != null) { %>
      <section>
        <div class="brand-BG container d-flex flex-column align-items-center" style="background-size: cover;background: linear-gradient(to right, #7a7777, #100e0e); ">
          <div class="product-details rounded row justify-content-around my-3 py-5 px-5">
            <div class="col-lg-6">
              <div class="zoomable-container w-100 h-auto">
                <img src="/public/img/products/<%=productDetails.frontImage%>" alt="" width="100%"  class="zoomable-image rounded" id="zoomable-image" />
              </div>
              <div class="small-images d-flex justify-content-center my-3">
                <img src="/public/img/products/<%=productDetails.frontImage%>" class="small-image" alt="Small Image 0" data-image="../../public/img/products/<%=productDetails.frontImage%>">
                <img src="../../public/img/products/<%=productDetails.images[0]%>" class="small-image" alt="Small Image 1" data-image="../../public/img/products/<%=productDetails.images[0]%>">
                <img src="../../public/img/products/<%=productDetails.images[1]%>" class="small-image" alt="Small Image 2" data-image="../../public/img/products/<%=productDetails.images[1]%>">
                <img src="../../public/img/products/<%=productDetails.images[2]%>" class="small-image" alt="Small Image 3" data-image="../../public/img/products/<%=productDetails.images[2]%>">
              </div>
            </div>
          
            <div class="product-title col-lg-5 mx-3 p-2 text-white d-flex flex-column justify-content-around">
              <div class="brand-fav d-flex justify-content-between my-1">
                <h6 class="fw-bold"><%=productDetails.brand.name%></h6>
                <button class="bg-transparent border-0" id="wishlistHeart" onclick="addToWishlist('<%=productDetails._id%>')">
                  <i class="fa fa-heart <%if(productExistInWishlist == null){%>text-white<%}else{%>text-danger<%}%>"></i>
                </button>
              </div>
              <h3 class="fw-light shadow-product-heading  text-white"><%=productDetails.name%></h3>
             <small class=" shadow-details " style="font-size: 0.7rem; color: greenyellow;">Extra ‚Çπ1000 off</small>
              <p class="shadow-details text-white">‚Çπ <%=productDetails.RAMSSD[0].price%> <s style="color: red; font-size: 0.8rem;">‚Çπ<%=productDetails.RAMSSD[0].price + 1000%></s></p>
              <div class="model-case d-flex">
                <p class="shadow-details text-white">Model: <%=productDetails.model%></p>
              </div>
              <%if(locals.coupons){%> 
                <small class="shadow-details m-0 p-0" style="font-size: 0.7rem; color: rgb(9, 181, 20);"><i class="fas fa-tag"></i>Coupons for you</small>
                <small class="shadow-details m-0 p-0" style="font-size: 0.7rem; color: rgb(110, 112, 102);">Apply coupon <strong class="shadow-details" style="font-size: 0.7rem; color: rgb(110, 112, 102)";><%=coupons.code%></strong> to get extra ‚Çπ<%=coupons.discount%> off T&C</small>
                <%}%>
              <div class="buy-cart row text-center justify-content-around p-0 mt-4">
                <div id="buyNow" class="button-div rounded col-5 border p-2  d-flex align-items-center justify-content-center" onclick="buyNow('<%=productDetails._id%>', '<%= JSON.stringify(productDetails.RAMSSD) %>')" style="background-color: rgb(242, 127, 5); color: white; outline: none;">
                  <span style="font-size: 0.8rem; font-weight: bold;"><i class="fas fa-fire"></i>Buy Now</span>
                </div>
                <div id="addToCart" class="button-div1 rounded col-5 border p-2  d-flex align-items-center justify-content-center" onclick="addToCart('<%=productDetails._id%>', '<%= JSON.stringify(productDetails.RAMSSD) %>')" style="color: rgb(242, 127, 5); background-color: #f3f4f5;">
                  <span style="font-size: 0.8rem; font-weight: bold;">add to cart</span>
                </div>
                <small class="shadow-details mt-3" style="font-size: 0.6rem; color: rrgb(35, 36, 32)">Select the variant before proceeding to checkout from below.</small>
              </div>
            </div>
          </div>
        </div>
        <div class="product-description mt-5 mb-5 container text-center">
          <div id="description ">
		   <div class="line-break text-center py-4">
              <span class="shadow-heading" style="font-size: 1rem">PRODUCT Details</span>
            </div>

            <!-- first row -->
            <div class="row my-4 justify-content-around">
              <div class="col-md-3 col-12 mb-sm-1 d-flex flex-column">
                <div class="description-heading">
                  <h6 class="fw-bold">Operating System</h6>
                  <p class="fs-7"><%=productDetails.operatingSystem%></p>
                </div>
              </div>
              <div class="col-md-3 col-12 mb-sm-1 d-flex flex-column">
                <div class="description-heading">
                  <h6 class="fw-bold">Series</h6>
                  <p class="fs-7"><%=productDetails.series%></p>
                </div>
              </div>
              <div class="col-md-3 col-12 mb-sm-1 d-flex flex-column">
                <div class="description-heading">
                  <h6 class="fw-bold">Type</h6>
                  <p class="fs-7"><%=productDetails.category.name%></p>
                </div>
              </div>
            </div>
            <!-- second row -->
            <div class="row my-4 justify-content-around">
              <div class="col-md-3 col-12 mb-sm-1 d-flex flex-column">
                <div class="description-heading">
                  <h6 class="fw-bold">Processor</h6>
                  <p class="fs-7"><%=productDetails.processor%></p>
                </div>
              </div>
              <div class="col-md-3 col-12 mb-sm-1 d-flex flex-column">
                <div class="description-heading">
                  <h6 class="fw-bold">RAM SSD VARIANTS</h6>
                  <select class="form-select fs-7 custom-select" id="ramCapacitySelect" onchange="updatePrice('<%= JSON.stringify(productDetails.RAMSSD) %>')">
                    <% productDetails.RAMSSD.forEach(function(ramSSD) { %>
                      <option class="fs-7 text-center" value="<%= ramSSD.ramCapacity %>">
                        <%= ramSSD.ramCapacity %> <%= ramSSD.ssdCapacity %>
                      </option>
                    <% }); %>
                  </select>                  
                </div>
              </div>

              <div class="col-12 col-md-3 mb-sm-1 d-flex flex-column">
            

                <div class="description-heading">
                  <h6 class="fw-bold">Price</h6>
                  <p class="fs-7" id="price"><%= productDetails.RAMSSD[0].price %></p>
                </div>
              </div>

            <!-- third row -->
            <div class="row my-4 justify-content-around">


              <div class="col-md-3 col-12 mb-sm-1 d-flex flex-column">
                <div class="description-heading">
                  <h6 class="fw-bold">Warranty</h6>
                  <p class="fs-7"><%=productDetails.warranty%></p>
                </div>
              </div>

              <div class="col-12 col-md-3 mb-sm-1 d-flex flex-column">
                <div class="description-heading">
                  <h6 class="fw-bold">Screen Size</h6>
                  <p class="fs-7"><%=productDetails.screenSize%></p>
                  </div>
              </div>


              <div class="col-md-3 col-12 mb-sm-1 d-flex flex-column">
                <div class="description-heading">
                  <h6 class="fw-bold">Sales Package</h6>
                  <p class="fs-7"><%=productDetails.salesPackage%></p>
                </div>
              </div>
          </div>
         
<!-- Review Carousel -->
<%if(reviews!=null){%>
<div class="container" id="reviewContainer">
  <% if (numberOfReviews!=null){%> <h5 class="text-center mx-auto col-lg-10 my-4">Reviews - (<%=numberOfReviews%>)</h5><%}%>
  </div>
    <div class="container d-flex justify-content-center" >
      <div class="row carousal-row">
          <div id="carouselExampleControls" class="carousel carousel-dark slide" data-bs-ride="carousel">
              <div class="carousel-inner">
                <div class="carousel-item active">
                  <div class="cards-wrapper card_wrap" style="background: white;">
                      <div class="card cardMargin">
                        <div class="card-body">
                          
                          <div class=" text-center" style="position: relative;">
                            <span>
                              <!-- printing the star -->
                              <% for( i=1; i<=5; i++){ %>
                                <%if(i<=reviews[0].rating){%>
                                <span style="color: yellow">‚òÖ</span>
                                <%}else{%>
                                  <span style="color: gray">‚òÖ</span>
                              <%}}%>
                            </span>
                            <span id="helpful<%=reviews[0]._id%>" style=" position: absolute; right: 0;">
                              <button onclick="helpful('<%=reviews[0]._id%>')" class="btn btn-sm rounded" style="background-color: #f3f3f3;"><%=reviews[0].helpful%> üëç</button>
                            </span>
                          </div>
                          <h6 class="my-2 card-title"><%=reviews[0].review%></h6>
                          <div>
                            <p class="card-text" style="font-size: 0.65rem"><%=reviews[0].customer.name%></p>
                          <img src="/public/img/users/<%=reviews[0].customer.photo%>" class="card-img-top w-25 rounded-2" alt="..."></a>
                          </div>
                          </div>
                        </div>
                        <%if(reviews[1]){%>
                        <div class="card cardMargin">
                          <div class="card-body">
                            <div class=" text-center" style="position: relative;">
                              <span>
                                <% for( i=1; i<=5; i++){ %>
                                  <%if(i<=reviews[1].rating){%>
                                  <span style="color: yellow">‚òÖ</span>
                                  <%}else{%>
                                    <span style="color: gray">‚òÖ</span>
                                <%}}%>
                              </span>
                              <span id="helpful<%=reviews[1]._id%>" style=" position: absolute; right: 0;">
                                <button onclick="helpful('<%=reviews[1]._id%>')" class="btn btn-sm rounded" style="background-color: #f3f3f3;"><%=reviews[1].helpful%> üëç</button>
                              </span>
                            </div>
                            <h6 class="my-1 card-title"><%=reviews[1].review%></h6>
                            <p class="card-text" style="font-size: 0.65rem"><%=reviews[1].customer.name%></p>
                            <img src="/public/img/users/<%=reviews[1].customer.photo%>" class="card-img-top w-25 rounded-2" alt="..."></a>
                           </div>
                         </div>
                         <%}%>
                        <%if(reviews[2]){%>
                         <div class="card cardMargin">
                           <div class="card-body">
                            <div class=" text-center" style="position: relative;">
                              <span>
                                <% for( i=1; i<=5; i++){ %>
                                  <%if(i<=reviews[2].rating){%>
                                  <span style="color: yellow">‚òÖ</span>
                                  <%}else{%>
                                    <span style="color: gray">‚òÖ</span>
                                <%}}%>
                              </span>
                              <span id="helpful<%=reviews[2]._id%>" style=" position: absolute; right: 0;">
                                <button onclick="helpful('<%=reviews[2]._id%>')" class="btn btn-sm rounded" style="background-color: #f3f3f3;"><%=reviews[2].helpful%> üëç</button>
                              </span>
                            </div>
                             <h6 class="my-1 card-title"><%=reviews[2].review%></h6>
                             <p class="card-text" style="font-size: 0.65rem"><%=reviews[2].customer.name%></p>
                             <img src="/public/img/users/<%=reviews[2].customer.photo%>" class="card-img-top w-25 rounded-2" alt="..."></a>
                           </div>
                         </div>
                         <%}%>
                  </div>
                </div>
                <div class="carousel-item ">
                    <div class="cards-wrapper card_wrap">
                        <% for(var i=3; i<=6; i++){%>
                          <%if(reviews[i]!=null){%>
                          <div class="card cardMargin">
                            <div class="card-body">
                              <div class=" text-center" style="position: relative;">
                                <span>
                                  <% for( j=1; j<=5; j++){ %>
                                    <%if(i<=reviews[i].rating){%>
                                    <span style="color: yellow">‚òÖ</span>
                                    <%}else{%>
                                      <span style="color: gray">‚òÖ</span>
                                  <%}}%>
                                </span>
                                <span id="helpful<%=reviews[i]._id%>" style=" position: absolute; right: 0;">
                                  <button onclick="helpful('<%=reviews[i]._id%>')" class="btn btn-sm rounded" style="background-color: #f3f3f3;"><%=reviews[i].helpful%> üëç</button>
                                </span>
                              </div>
                              <h6 class="card-title"><%=reviews[i].review%></h6>
                              <p class="card-text" style="font-size: 0.65rem"><%=reviews[i].customer.name%></p>
                              
                              <p class="card-text" style="font-size: 0.65rem"><%=moment(reviews[i].createdAt).format('ll') %></p>
                              
                              <img src="/public/img/users/<%=reviews[i].customer.photo%>" class="card-img-top rounded-2 w-25" alt="...">
                            </div>
                          </div>
                          <%}%>
                            <%}%>
                      </div>
                    </div>
              </div>
              <button class="carousel-control-prev" id="reviewButtomLeft" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                <span class="carousel-control-prev-icon carousel-arrow" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" id="reviewButtomRight" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                <span class="carousel-control-next-icon carousel-arrow" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>
      </div>
    </div>
<%}%>
  <%if(session){%>
    <button class="btn btn-sm btn-dark mb-3 col-lg-2 mb-4" id="addReview" onclick="checkAccess('<%= JSON.stringify(accessToReview) %>', '<%= productDetails._id %>')">Add a review</button>

  <%}%> 
      <%if(similarProducts){%>
         <!-- similar Products -->
         <div class="line-break text-center py-4">
          <span class="shadow-heading" style="font-size: 1rem">SIMILAR PRODUCTS</span>
        </div>
        <div class="text-center d-flex justify-content-center flex-column my-3">
          <div class="row row-cols-1 row-cols-md-4 justify-content-center">
            <% similarProducts.forEach((product,i)=>{%>
              <div class="col-lg-3 my-2 mb-5">
                <div class="card h-100 border-0">
                  <a href="/products/<%=product._id%>">
                    <img
                      src="/public/img/products/<%=product.thumbnail%>"
                      class="card-img-top px-4 pt-2 h-75"
                      alt="..."
                      style="object-fit: scale-down; aspect-ratio: 1;"
                    />
                    <div class="card-body h-50">
                      <h6 class="card-title text-dark"><%=product.name%></h6>
                      <span style="font-weight: bold; color: #7f7f7f; font-size: 0.75rem;">
                        <%=product.brand.name%>
                      </span>
                      <br>
                    </div>
                  </a>
                </div>
              </div>
            <%})%>
          </div>
          
          <span
            ><a 
               href="/categories/<%= productDetails.category._id %>"
              class="btn btn-outline-dark py-2  px-3 my-5"
              style="font-size: 0.75rem"
              >SHOW MORE</a
            ></span
          >
        </div>
        <%}%>

         <!-- Still Need any help -->
         <div class="still-help" style="font-size: 0.75rem;">
          <p><span class="fw-bold">Still need any help?</span> Our executive will help you in making the choice.</p>
          <h6 class="fw-bold text-underline"><u><a href="" style="font-size: 0.75rem;">Contact executive</a></u></h6>
           </div>
    </section>
    <%}%>
   <footer class="bg-theme" style="background: #f3f2f2; height: 20%;">
      <div
        class="container links pt-4 pb-2 row mx-auto line-break d-flex justify-content-around footer-links"
      >
        <a class="col-lg-2 pb-2 text-center text-black" href="#"
          >Track Shipping</a
        >
        <a class="col-lg-2 pb-2 text-center text-black" href="#">Contact Us</a>
        <a class="col-lg-2 pb-2 text-center text-black" href="#"
          >Customer Care</a
        >
        <a class="col-lg-2 pb-2 text-center text-black" href="#">About us</a>
        <span class="col-lg-2 justify-content-center d-flex align-items-center">
          <i class="fab fa-instagram text-black"></i>
          <i class="fab fa-facebook-f text-black"></i>
          <i class="fab fa-twitter text-black"></i>
          <i class="fab fa-whatsapp text-black"></i>
        </span>
      </div>
      <div
        class="copyright bg-theme py-1 text-center"
        style="font-size: 0.85rem ; background: #f1efef;" 
      >
        <span style="color: black"
          >Copyright ¬© 2023 | LAP4YOU | Made by
          <a
            href="https://rishikesht1245.github.io/Rishikesh_website/"
            style="color: gray"
            >Rishikesh T
          </a></span
        >
      </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/medium-zoom"></script>

   <script src="/public/js/singleProduct.js"></script>
    
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
    ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </body>
</html>
